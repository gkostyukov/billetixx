# Billetixx — Руководство пользователя

Этот гайд для новых пользователей, которые хотят безопасно начать работу с терминалом, сканером и консервативным движком.

## 1) Первый вход и настройка

1. Войдите в аккаунт.
2. Откройте Настройки → API.
3. Выберите окружение OANDA `practice` (рекомендуется для старта).
4. Укажите OANDA account ID и token.
5. Добавьте OpenAI API key (опционально для AI-текста, не используется в scoring).
6. Сохраните настройки.

Если ключи API не заданы, запросы к аккаунту/торговле будут блокироваться с понятным сообщением.

## 2) Что делает терминал

На странице Trading вы получаете:
- Live-график и поток bid/ask.
- AI-сценарий (только advisory).
- Управление Conservative Engine (`Dry Run` / `Execute`).
- Панель Scanner Status (результаты мульти-парного сканирования).
- Order Ticket (ручная отправка ордера с валидациями).

## 3) Как работает сканер (multi-pair)

Движок сканирует пары из watchlist в `config/trading.json`:
1. Запрашивает market/account данные по каждой паре.
2. Строит индикаторы и market context.
3. Запускает активную стратегию.
4. Применяет проверки risk manager.
5. Считает score для валидных кандидатов.
6. Выбирает одного лучшего кандидата по score.
7. Исполняет только если проходят risk + exposure ограничения.

Важно: одновременно разрешена только одна сделка (`maxConcurrentTrades=1`).

## 4) Как использовать Dry Run и Execute

- Для мониторинга используйте `Dry Run`.
- В `Scanner Status`:
  - `BEST` = самый сильный валидный кандидат по score.
  - `SELECTED` = пара, выбранная движком для потенциального исполнения.
- Проверяйте причины отклонения у отфильтрованных пар.
- Используйте `Execute` только когда сетап и контекст риска понятны.

## 5) Модель безопасности (capital-protective)

Локально всегда применяются:
- фиксированный размер = `1000` units
- максимум риска на сделку = `$6`
- FIFO checks
- spread filter
- порог risk/reward
- блокировка коррелированной экспозиции (USD-long stacking protection)
- ограничение на число одновременных сделок

AI не используется в scoring-логике.

## 6) Scanner-панель в Dashboard

Dashboard показывает ту же видимость сканера:
- Active strategy
- Selected trade
- Список пар с decision/score/RR/spread/reason
- Фильтры: All / Only valid / Only rejected

Используйте это для пассивного мониторинга без открытия полного терминала.

## 7) Логи и наблюдаемость

- `logs/engine-cycles.log` — данные цикла сканирования и решения.
- `logs/ai-decisions.log` — диагностика AI-анализа.
- `GET /scanner-status` — текущий срез scanner-состояния.
- `GET /status` — сводный статус движка.

## 8) Рекомендуемый путь onboarding

1. Настройте practice-ключи.
2. Проводите полную сессию только в `Dry Run`.
3. Наблюдайте поведение `BEST` и `SELECTED` в разных фазах рынка.
4. Проверяйте, что причины отклонения соответствуют ожиданиям.
5. Переходите к `Execute` только после уверенности в дисциплине процесса.

---

Подробности по архитектуре и расширению — в `ARCHITECTURE.md`.
